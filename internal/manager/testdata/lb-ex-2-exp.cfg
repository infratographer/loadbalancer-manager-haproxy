global
  master-worker
  maxconn 200
  pidfile /var/run/haproxy/haproxy.pid
  stats socket /var/run/haproxy/haproxy.sock mode 660 level admin expose-fd listeners
  log 127.0.0.1 local0

defaults unnamed_defaults_1
  mode tcp
  log global
  option tcplog
  timeout connect 5s
  timeout client 50s
  timeout server 50s
  retries 3

frontend ssh-service
  bind ipv4@:22
  use_backend ssh-service

frontend stats
  mode http
  bind 127.0.0.1:29782
  stats enable
  stats uri /stats
  stats refresh 10s
  http-request use-service prometheus-exporter if { path /metrics }

backend ssh-service
  server c0a80101-0000-0000-0000-000000000001 1.2.3.4:2222 check port 2222
  server c0a80101-0000-0000-0000-000000000002 1.2.3.4:222 check port 222
  server c0a80101-0000-0000-0000-000000000003 4.3.2.1:2222 check port 2222 disabled
  server b1982331-0000-0000-0000-000000000001 7.8.9.0:2222 check port 2222

program dataplaneapi
  command dataplaneapi -f /bitnami/haproxy/conf/dataplaneapi.cfg
  no option start-on-reload
